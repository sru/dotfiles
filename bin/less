#!/bin/sh

export LESSHISTFILE="${XDG_DATA_HOME:-${HOME}/.local/share}/less/history"

dir=$(CDPATH='' cd -- "$(dirname -- "$0")" && pwd)
cmd_name=$(basename -- "$0")

IFS=:
for path in ${PATH}; do
  cmd_path="${path}/${cmd_name}"
  if [ -x "${cmd_path}" ] && ! cmp -s "${cmd_path}" "${dir}/${cmd_name}"; then
    exec "${cmd_path}" "$@"
  fi
done

echo "$0: command not found" >&2
exit 127

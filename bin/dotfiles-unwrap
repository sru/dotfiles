#!/bin/sh

dir=$(CDPATH='' cd -- "$(dirname -- "$0")" && pwd)

if [ "$#" = 0 ]; then
  echo "usage: $0 <command> [...]"
  exit 2
fi

cmd_name=$1
shift

IFS=:
for path in ${PATH}; do
  cmd_path="${path}/${cmd_name}"
  if [ -x "${cmd_path}" ] && ! cmp -s "${cmd_path}" "${dir}/${cmd_name}"; then
    exec "${cmd_path}" "$@"
  fi
done

echo "$0: ${cmd_name}: command not found" >&2
exit 127
